本题思路：
1.利用背对背的两个栈维护一个队列。每次dequeue时，把右边的栈全部移到左边去，分摊复杂度O(1)。
2.每个栈也要维护一个影子栈，存放当前下标往栈底去的所有元素中的最大值。
3.每次采用‘mv’操作时，左栈必然为空，此时重新维护左栈最大值，即每次插入时比较插入元素与当前最大值的大小，以确保左侧的影子栈依然表示当前元素以下所有元素中的最大值。
4.每次查询时，最大值必然在左栈和右栈的最大值当中选。也就是两个影子栈的栈顶元素。
5.时间复杂度：每个元素最多被转移一次，除此以外所有操作都是O(1)的，因此时间复杂度是O(n)的；空间复杂度O(n)，即四个栈。